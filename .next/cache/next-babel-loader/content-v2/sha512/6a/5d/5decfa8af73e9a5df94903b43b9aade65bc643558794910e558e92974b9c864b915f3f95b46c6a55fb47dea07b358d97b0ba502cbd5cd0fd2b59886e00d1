{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport 'firebase/storage';\nimport Link from \"next/link\";\nimport { useEffect, useRef } from \"react\";\nimport fireApp from \"../firebase_config\";\n\nconst Profile = ({\n  guests\n}) => {\n  const picsRef = guests === null || guests === void 0 ? void 0 : guests.map(i => useRef());\n  useEffect(async () => {\n    if (guests) {\n      let imgFiles = [];\n      imgFiles = guests.map(i => fireApp.storage().refFromURL(`gs://hotel-3c249.appspot.com/images/${i.imgName}`));\n      imgFiles.map((i, j) => {\n        i.getDownloadURL().then(url => {\n          i[\"profilePic\"] = url;\n        }).then(() => {\n          picsRef[j].current.src = i.profilePic;\n        });\n      });\n    }\n  }, []);\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"space-y-4 \",\n    children: [/*#__PURE__*/_jsx(\"h1\", {\n      className: \"pt-8 pl-8\",\n      children: \"Profile\"\n    }), guests ? /*#__PURE__*/_jsxs(\"table\", {\n      className: \"table-auto\",\n      children: [/*#__PURE__*/_jsx(\"thead\", {\n        children: /*#__PURE__*/_jsxs(\"tr\", {\n          children: [/*#__PURE__*/_jsx(\"th\", {\n            className: \"px-8 \",\n            children: \"Profile Pic\"\n          }), /*#__PURE__*/_jsx(\"th\", {\n            className: \"px-8 \",\n            children: \"First Name\"\n          }), /*#__PURE__*/_jsx(\"th\", {\n            className: \"px-8 \",\n            children: \"Last Name\"\n          }), /*#__PURE__*/_jsx(\"th\", {\n            className: \"px-8 \",\n            children: \"Phone\"\n          }), /*#__PURE__*/_jsx(\"th\", {\n            className: \"px-8 \",\n            children: \"Address\"\n          }), /*#__PURE__*/_jsx(\"th\", {\n            className: \"px-8 \",\n            children: \"Email\"\n          }), /*#__PURE__*/_jsx(\"th\", {\n            className: \"px-8 \",\n            children: \"Driver ID#\"\n          }), /*#__PURE__*/_jsx(\"th\", {\n            className: \"px-8 \",\n            children: \"Vehicle ID#\"\n          })]\n        })\n      }), /*#__PURE__*/_jsx(\"tbody\", {\n        children: guests === null || guests === void 0 ? void 0 : guests.map((i, j) => {\n          return /*#__PURE__*/_jsxs(\"tr\", {\n            children: [/*#__PURE__*/_jsx(\"td\", {\n              className: \"px-8 py-4\",\n              children: /*#__PURE__*/_jsx(\"img\", {\n                ref: picsRef[j],\n                alt: \"guest's image\",\n                width: \"100\",\n                height: \"100\"\n              })\n            }), /*#__PURE__*/_jsx(\"td\", {\n              className: \"px-8 py-4\",\n              children: i.firstName\n            }), /*#__PURE__*/_jsx(\"td\", {\n              className: \"px-8 py-4\",\n              children: i.lastName\n            }), /*#__PURE__*/_jsx(\"td\", {\n              className: \"px-8 py-4\",\n              children: i.phone\n            }), /*#__PURE__*/_jsx(\"td\", {\n              className: \"px-8 py-4\",\n              children: i.address\n            }), /*#__PURE__*/_jsx(\"td\", {\n              className: \"px-8 py-4\",\n              children: i.email\n            }), /*#__PURE__*/_jsx(\"td\", {\n              className: \"px-8 py-4\",\n              children: i.driverId\n            }), /*#__PURE__*/_jsx(\"td\", {\n              className: \"px-8 py-4\",\n              children: i.carId\n            }), /*#__PURE__*/_jsx(\"td\", {\n              className: \"px-8 py-4\",\n              children: /*#__PURE__*/_jsx(Link, {\n                href: \"/profile/\" + i.email,\n                children: /*#__PURE__*/_jsx(\"a\", {\n                  children: \"View\"\n                })\n              })\n            })]\n          }, JSON.stringify(i));\n        })\n      })]\n    }) : !email && /*#__PURE__*/_jsx(\"p\", {\n      children: \"No user has signed up yet.\"\n    })]\n  });\n};\n\nexport default Profile;\nexport async function getServerSideProps({\n  query\n}) {\n  let guests = [];\n  await fireApp.firestore().collection(\"guest\").get().then(queryData => {\n    queryData.forEach(i => {\n      guests.push(i.data());\n    });\n  });\n  return {\n    props: {\n      guests\n    }\n  };\n}","map":null,"metadata":{},"sourceType":"module"}