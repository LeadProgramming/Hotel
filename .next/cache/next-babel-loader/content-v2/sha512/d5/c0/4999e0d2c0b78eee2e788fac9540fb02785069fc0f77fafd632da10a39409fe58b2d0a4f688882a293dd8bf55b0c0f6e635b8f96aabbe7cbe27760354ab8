{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useRouter } from \"next/router\";\nimport { useForm } from \"react-hook-form\";\nimport { useDispatch } from \"react-redux\";\nimport fireApp from \"../firebase_config\";\nimport { reserve } from \"../store/reservationSlice\";\n\nconst Reservation = ({\n  reservations\n}) => {\n  const router = useRouter();\n  const {\n    register,\n    handleSubmit,\n    watch,\n    errors\n  } = useForm(); // const watchFields = watch([\"checkInDate\", \"checkOutDate\"]);\n\n  const dispatch = useDispatch();\n\n  const onSubmit = data => {\n    const days = Math.floor((Date.parse(data.checkOutDate) - Date.parse(data.checkInDate)) / 8.64e+7);\n    data[\"days\"] = days;\n    dispatch(reserve(data));\n    router.push(`/rooms?type=${data.roomType}`);\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"space-y-4\",\n    children: [/*#__PURE__*/_jsx(\"h1\", {\n      className: \"pt-8 text-center font-bold text-gray-700 text-xl\",\n      children: \"Reservation\"\n    }), /*#__PURE__*/_jsxs(\"form\", {\n      onSubmit: handleSubmit(onSubmit),\n      className: \"space-y-2 w-1/2 m-auto bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4\",\n      children: [/*#__PURE__*/_jsx(\"label\", {\n        className: \"block text-gray-700 text-sm font-bold mb-2\",\n        htmlFor: \"firstName\",\n        children: \"First Name:\"\n      }), /*#__PURE__*/_jsx(\"input\", {\n        className: \"block w-full shadow border rounded py-2 px-3 text-gray-700 focus:outline-none\",\n        name: \"firstName\",\n        ref: register\n      }), /*#__PURE__*/_jsx(\"label\", {\n        className: \"block text-gray-700 text-sm font-bold mb-2\",\n        htmlFor: \"firstName\",\n        htmlFor: \"lastName\",\n        children: \"Last Name:\"\n      }), /*#__PURE__*/_jsx(\"input\", {\n        className: \"block w-full shadow border rounded py-2 px-3 text-gray-700 focus:outline-none\",\n        name: \"lastName\",\n        ref: register\n      }), /*#__PURE__*/_jsx(\"label\", {\n        className: \"block text-gray-700 text-sm font-bold mb-2\",\n        htmlFor: \"checkInDate\",\n        children: \"Check-in Date:\"\n      }), /*#__PURE__*/_jsx(\"input\", {\n        className: \"block w-full shadow border rounded py-2 px-3 text-gray-700 focus:outline-none\",\n        name: \"checkInDate\",\n        type: \"date\",\n        ref: register({\n          required: true,\n          valueAsDate: true\n        })\n      }), /*#__PURE__*/_jsx(\"label\", {\n        className: \"block text-gray-700 text-sm font-bold mb-2\",\n        htmlFor: \"checkOutDate\",\n        children: \"Check-Out Date:\"\n      }), /*#__PURE__*/_jsx(\"input\", {\n        className: \"block w-full shadow border rounded py-2 px-3 text-gray-700 focus:outline-none\",\n        name: \"checkOutDate\",\n        type: \"date\",\n        ref: register({\n          required: true,\n          valueAsDate: true\n        })\n      }), /*#__PURE__*/_jsx(\"label\", {\n        className: \"block text-gray-700 text-sm font-bold mb-2\",\n        htmlFor: \"roomType\",\n        children: \"Room Type:\"\n      }), /*#__PURE__*/_jsxs(\"select\", {\n        className: \"block shadow border rounded py-2 px-3 text-gray-700 focus:outline-none\",\n        name: \"roomType\",\n        ref: register,\n        children: [/*#__PURE__*/_jsx(\"option\", {\n          value: \"K\",\n          children: \"King\"\n        }), /*#__PURE__*/_jsx(\"option\", {\n          value: \"DQ\",\n          children: \"Double Queen\"\n        }), /*#__PURE__*/_jsx(\"option\", {\n          value: \"DQK\",\n          children: \"Double Queen with Kitchen\"\n        }), /*#__PURE__*/_jsx(\"option\", {\n          value: \"S\",\n          children: \"Suite\"\n        })]\n      }), /*#__PURE__*/_jsx(\"button\", {\n        class: \"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\",\n        type: \"submit\",\n        children: \"Proceed\"\n      })]\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"mt-8 text-center font-bold text-gray-700 text-xl \",\n      children: \"All Reservations\"\n    }), /*#__PURE__*/_jsxs(\"table\", {\n      className: \"table-auto mx-8\",\n      children: [/*#__PURE__*/_jsx(\"thead\", {\n        children: /*#__PURE__*/_jsxs(\"tr\", {\n          children: [/*#__PURE__*/_jsx(\"th\", {\n            className: \"px-8\",\n            children: \"First Name \"\n          }), /*#__PURE__*/_jsx(\"th\", {\n            className: \"px-8\",\n            children: \"Last Name\"\n          }), /*#__PURE__*/_jsx(\"th\", {\n            className: \"px-8\",\n            children: \"Initial Date\"\n          }), /*#__PURE__*/_jsx(\"th\", {\n            className: \"px-8\",\n            children: \"Check-In\"\n          }), /*#__PURE__*/_jsx(\"th\", {\n            className: \"px-8\",\n            children: \"Check-Out\"\n          }), /*#__PURE__*/_jsx(\"th\", {\n            className: \"px-8\",\n            children: \"Room Type\"\n          }), /*#__PURE__*/_jsx(\"th\", {\n            className: \"px-8\",\n            children: \"Room Status\"\n          }), /*#__PURE__*/_jsx(\"th\", {\n            className: \"px-8\",\n            children: \"Room #\"\n          }), /*#__PURE__*/_jsx(\"th\", {\n            className: \"px-8\",\n            children: \"Daily Rate\"\n          }), /*#__PURE__*/_jsx(\"th\", {\n            className: \"px-8\",\n            children: \"Total Charge\"\n          })]\n        })\n      }), /*#__PURE__*/_jsx(\"tbody\", {\n        children: (reservations === null || reservations === void 0 ? void 0 : reservations.length) > 0 ? reservations.map(i => {\n          return /*#__PURE__*/_jsxs(\"tr\", {\n            children: [/*#__PURE__*/_jsx(\"td\", {\n              className: \"px-8 py-4\",\n              children: i.firstName\n            }), /*#__PURE__*/_jsx(\"td\", {\n              className: \"px-8 py-4\",\n              children: i.lastName\n            }), /*#__PURE__*/_jsx(\"td\", {\n              className: \"px-8 py-4\",\n              children: new Date(i.reservedDate).toDateString()\n            }), /*#__PURE__*/_jsx(\"td\", {\n              className: \"px-8 py-4\",\n              children: new Date(i.checkInDate).toDateString()\n            }), /*#__PURE__*/_jsx(\"td\", {\n              className: \"px-8 py-4\",\n              children: new Date(i.checkOutDate).toDateString()\n            }), /*#__PURE__*/_jsx(\"td\", {\n              className: \"px-8 py-4\",\n              children: i.roomType\n            }), /*#__PURE__*/_jsx(\"td\", {\n              className: \"px-8 py-4\",\n              children: i.roomStatus\n            }), /*#__PURE__*/_jsx(\"td\", {\n              className: \"px-8 py-4\",\n              children: i.roomNumber\n            }), /*#__PURE__*/_jsx(\"td\", {\n              className: \"px-8 py-4\",\n              children: i.dailyRate\n            }), /*#__PURE__*/_jsx(\"td\", {\n              className: \"px-8 py-4\",\n              children: i.totalCharge\n            })]\n          });\n        }) : /*#__PURE__*/_jsx(\"tr\", {\n          children: \"No rooms to display\"\n        })\n      })]\n    })]\n  });\n};\n\nexport async function getServerSideProps({\n  query\n}) {\n  let reservations = [];\n  await fireApp.firestore().collection(\"reservation\").orderBy(\"checkInDate\").get().then(queryData => {\n    queryData.forEach(i => {\n      reservations.push(i.data());\n    });\n  });\n  return {\n    props: {\n      reservations\n    }\n  };\n}\nexport default Reservation;","map":null,"metadata":{},"sourceType":"module"}